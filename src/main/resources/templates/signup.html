<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>注册</title>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="js/cookiehandle.js"></script>
</head>
<body>
<div><span>邮箱</span><span><input id="email" type="text"></span></div>
<div><span>用户</span><span><input id="username" type="text"></span></div>
<div><span>密码</span><span><input id="password" type="password"></span></div>
<div><span>密码</span><span><input id="password2" type="password"></span></div>
<div><span>验证码</span><span><input id="vcode" type="text"></span></div>
<button onclick="vcode">发送验证码</button>
<button onclick="signup">注册</button>
<button onclick="login">我已注册，点击登录</button>
<script>
    function vcode() {
        var email = document.getElementById("email").value;
    }
    function signup() {
        var email = document.getElementById("email").value;
        var username = document.getElementById("username").value;
        var password = document.getElementById("password").value;
        var password2 = document.getElementById("password2").value;
        if (password !== password2) alert("密码不一致！");
        $.ajax({
            type: 'post',
            url: '/user/signup',
            data: JSON.stringify({
                'username': username,
                'password': password
            }),
            contentType: "application/json;charset=UTF-8",
            dataType: "json",
            success: function (result) {
                setCookie("token", result.token, 1);
                location.assign("/chat");
            }
        });
    }
    function login() {
        location.assign("/login");
    }
</script>
</body>
</html>